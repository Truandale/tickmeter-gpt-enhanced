# Changelog

All notab- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≥—Ä–∞—Ñ–∏–∫–∞**: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –æ—Ç—Ä–∏—Å–æ–≤–∫–∞ –≥—Ä–∞—Ñ–∏–∫–∞ –ø–∏–Ω–≥–∞ —Å –ø–æ–¥—Ö–æ–¥—è—â–∏–º–∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞–º–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω —Ç–∞–π–º–µ—Ä overlay –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å ping_interval –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
- **–¢–æ—á–Ω–æ—Å—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è**: –û–±–µ—Å–ø–µ—á–µ–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∑–Ω–∞—á–µ–Ω–∏–π –ø–∏–Ω–≥–∞ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–∞

### üêõ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è Live Packets View (–ø—Ä–µ–¥—ã–¥—É—â–∏–µ –≤–µ—Ä—Å–∏–∏)
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ deadlock –ø–æ—Ç–æ–∫–æ–≤**: –†–µ—à–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ ContextSwitchDeadlock –≤ Live Packets View –∏–∑-–∑–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ UI –ø–æ—Ç–æ–∫–∞
- **–ó–∞—â–∏—Ç–∞ –æ—Ç NullReference**: –î–æ–±–∞–≤–ª–µ–Ω—ã –≤—Å–µ—Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ null –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–∞–∫–µ—Ç–æ–≤ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∫—Ä–∞—à–µ–π
- **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç–∏**: –ó–∞–º–µ–Ω–µ–Ω—ã –±–ª–æ–∫–∏—Ä—É—é—â–∏–µ Invoke –≤—ã–∑–æ–≤—ã –Ω–∞ BeginInvoke –¥–ª—è –ª—É—á—à–µ–π –æ—Ç–∑—ã–≤—á–∏–≤–æ—Å—Ç–∏
- **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–∞–∫–µ—Ç–æ–≤**: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞–∫–µ—Ç–æ–≤, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º—ã—Ö –∑–∞ —Ü–∏–∫–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (–º–∞–∫—Å. 100) –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∑–∞–≤–∏—Å–∞–Ω–∏—è UI
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é**: –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –±—É—Ñ–µ—Ä–∞ –ø–∞–∫–µ—Ç–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π null
- **–í–∞–ª–∏–¥–∞—Ü–∏—è Ethernet –ø–∞–∫–µ—Ç–æ–≤**: –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä Ethernet, UDP –∏ TCP –ø–∞–∫–µ—Ç–æ–≤

### üöÄ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏  
- **–û—á–∏—Å—Ç–∫–∞ debug –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è**: –£–¥–∞–ª–µ–Ω –∏–∑–±—ã—Ç–æ—á–Ω—ã–π debug –≤—ã–≤–æ–¥ –∏–∑ –º–µ—Ç–æ–¥–∞ GetOption, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–∑—ã–≤–∞–ª –ø—Ä–æ–±–ª–µ–º—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Live Packets View**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ "Selected adapter is not set!" –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–Ω–æ–º multi-adapter —Ä–µ–∂–∏–º–µ
- **–£–ª—É—á—à–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –∞–¥–∞–ø—Ç–µ—Ä–æ–≤**: –°–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∞ –ª–æ–≥–∏–∫–∞ –≤—ã–±–æ—Ä–∞ –∞–¥–∞–ø—Ç–µ—Ä–∞ –≤ PacketStats.cs –¥–ª—è multi-adapter –∑–∞—Ö–≤–∞—Ç–∞to TickMeter project will be documented in this file.

## [Unreleased] - 2025-09-15

### üåê –ü–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è Multi-Adapter —Ä–µ–∂–∏–º–∞ –≤ Live Packets View
- **–ó–∞—Ö–≤–∞—Ç —Å–æ –≤—Å–µ—Ö –∞–¥–∞–ø—Ç–µ—Ä–æ–≤**: –¢–µ–ø–µ—Ä—å Live Packets View —Ä–µ–∞–ª—å–Ω–æ –∑–∞—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –ø–∞–∫–µ—Ç—ã —Å–æ –≤—Å–µ—Ö —Å–µ—Ç–µ–≤—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ, –∞ –Ω–µ —Ç–æ–ª—å–∫–æ —Å –ø–µ—Ä–≤–æ–≥–æ –Ω–∞–π–¥–µ–Ω–Ω–æ–≥–æ
- **–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –≤–æ—Ä–∫–µ—Ä—ã**: –ö–∞–∂–¥—ã–π —Å–µ—Ç–µ–≤–æ–π –∞–¥–∞–ø—Ç–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–π BackgroundWorker –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–∞–∫–µ—Ç–æ–≤
- **–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –∞–¥–∞–ø—Ç–µ—Ä–æ–≤ (loopback, npcap, hyper-v, vmware, virtualbox, vethernet)
- **–°—Ç–∞–±–∏–ª—å–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞**: –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –≤—Å–µ—Ö –≤–æ—Ä–∫–µ—Ä–æ–≤ –ø—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ –∑–∞—Ö–≤–∞—Ç–∞ –ø–∞–∫–µ—Ç–æ–≤
- **–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ—Å—Ç—å**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ "–ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –∞–¥–∞–ø—Ç–µ—Ä—ã" –¥–ª—è –≥–∏–±–∫–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–∞–∫–µ—Ç–æ–≤ —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ UI

### üîß –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è
- **–ï–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö**: Live Packets View —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ—Ç –∂–µ –º–µ—Ö–∞–Ω–∏–∑–º multi-adapter, —á—Ç–æ –∏ –≥–ª–∞–≤–Ω–æ–µ –æ–∫–Ω–æ
- **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å RTSS**: Overlay –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–æ–ª—É—á–∞–µ—Ç –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å–æ –≤—Å–µ—Ö –∞–¥–∞–ø—Ç–µ—Ä–æ–≤
- **–£–ø—Ä–æ—â–µ–Ω–∏–µ –∫–æ–¥–∞**: –£–¥–∞–ª–µ–Ω—ã –∏–∑–±—ã—Ç–æ—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã StartMultiAdapterCapture –∏ StartSingleAdapterCapture
- **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å**: –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã —Å –∞–¥–∞–ø—Ç–µ—Ä–∞–º–∏ –≤–æ –≤—Å–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏

### üìä –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è overlay –∏ –≥—Ä–∞—Ñ–∏–∫–∞ –ø–∏–Ω–≥–∞
- **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –≥—Ä–∞—Ñ–∏–∫–∞ –ø–∏–Ω–≥–∞**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ "–∑–∞–º–µ—Ä–∑—à–µ–≥–æ" –≥—Ä–∞—Ñ–∏–∫–∞ —á–µ—Ä–µ–∑ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è pingBuffer
- **–ß–∞—Å—Ç–æ—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è overlay**: –°–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∞ —á–∞—Å—Ç–æ—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è overlay –¥–ª—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞–º –ø–∏–Ω–≥–∞
- **–ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö –ø–∏–Ω–≥–∞**: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö –æ—Ç PingManager –∫ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—é –≤ overlay
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≥—Ä–∞—Ñ–∏–∫–∞**: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –æ—Ç—Ä–∏—Å–æ–≤–∫–∞ –≥—Ä–∞—Ñ–∏–∫–∞ –ø–∏–Ω–≥–∞ —Å –ø–æ–¥—Ö–æ–¥—è—â–∏–º–∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞–º–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω —Ç–∞–π–º–µ—Ä overlay –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å ping_interval –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
- **–¢–æ—á–Ω–æ—Å—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è**: –û–±–µ—Å–ø–µ—á–µ–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∑–Ω–∞—á–µ–Ω–∏–π –ø–∏–Ω–≥–∞ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–∞
- **Packet Processing Limit**: Limited packets processed per refresh cycle (max 100) to prevent UI freezing
- **Memory Management**: Improved packet buffer handling with null filtering
- **Ethernet Packet Validation**: Added proper validation for Ethernet, UDP, and TCP packet structures

### ÔøΩüêõ Performance & Stability Fixes  
- **Debug Logging Cleanup**: Removed excessive debug output from GetOption method that was causing performance issues
- **Live Packets View Fix**: Fixed "Selected adapter is not set!" error when multi-adapter mode is enabled
- **Adapter Logic Improvement**: Corrected adapter selection logic in PacketStats.cs for multi-adapter capture
- **Performance Optimization**: Eliminated debug overhead in frequently called configuration methods
- **Code Cleanup**: Removed unused debug statements from PingManager.cs and App.cs

### ‚úÖ Status: TESTED & WORKING
- **Universal Features**: Successfully implemented and tested comprehensive universality enhancements
- **Advanced Ping System**: TCP ping with ICMP fallback working correctly
- **EMA Smoothing**: Exponential moving average for tickrate stabilization active
- **STUN Integration**: External IP detection through STUN protocol operational
- **UI Integration**: All 10 new universal checkboxes properly integrated
- **Multi-Adapter Feature**: Successfully tested and confirmed working
- **Live Packets View**: Now stable with proper multi-threading and null safety
- **Ready for Production**: All features are stable and ready for use

## [Major Features] - 2025-09-12

### üöÄ Major New Universal Features Implementation

#### üåê Advanced Ping Management System
- **TCP Ping**: Primary ping method using TcpClient with precise connection timing
- **ICMP Fallback**: Automatic fallback to ICMP when TCP ping fails
- **Interface Binding**: Ping operations bound to specific network interface for accuracy
- **Active Target Detection**: Intelligent ping targeting based on active connections
- **Configurable Ports**: Support for custom ping ports (default: 80, 443)
- **Real-time Updates**: Live ping results integration with GUI

#### üìä EMA Tickrate Smoothing
- **Exponential Moving Average**: Smooth tickrate display without jarring fluctuations  
- **Configurable Alpha**: Adjustable smoothing coefficient (default: 0.15)
- **Real-time Processing**: Applied during tickrate calculation for instant effect
- **Performance Optimized**: Minimal overhead with thread-safe implementation

#### üîç STUN External IP Detection
- **Multi-Server Support**: Google STUN, Cloudflare, and Nextcloud servers
- **Automatic Detection**: Background external IP discovery during server detection
- **Smart Caching**: 10-minute cache timeout to minimize network overhead
- **Error Resilience**: Graceful fallback between STUN servers

#### ‚öôÔ∏è Universal Configuration System
- **10 New Checkboxes**: Complete UI integration in SettingsForm
- **Persistent Settings**: All preferences saved to settings.ini
- **Runtime Toggle**: Enable/disable features without restart
- **Backward Compatibility**: All existing functionality preserved

### üõ†Ô∏è Technical Implementation Details

#### New Core Classes
- **PingManager.cs**: Comprehensive ping management with TCP/ICMP support (358 lines)
- **TickrateSmoothing.cs**: EMA implementation with thread-safe operations (150+ lines)
- **StunClient.cs**: STUN protocol implementation for external IP detection (250+ lines)

#### Enhanced Existing Classes
- **SettingsManager.cs**: Added GetBool(), GetInt(), GetString() methods
- **TickMeterState.cs**: Integrated EMA smoothing and external IP tracking
- **GUI.cs**: Added ping manager lifecycle and result handling
- **App.cs**: Centralized initialization of all new components

#### Universal Settings Integration
- `ping_bind_to_interface`: Bind ping to selected network adapter
- `ping_tcp_prefer`: Prefer TCP ping over ICMP
- `ping_fallback_icmp`: Fallback to ICMP when TCP fails  
- `ping_target_active_only`: Only ping active connection targets
- `tickrate_smoothing`: Enable EMA smoothing for tickrate
- `dedup_multi_nic`: Packet deduplication for multi-adapter mode
- `enable_ipv6`: IPv6 protocol support
- `ignore_virtual_adapters`: Filter out virtual network interfaces
- `rtss_only_active`: RTSS overlay only for active processes
- `stun_enable`: Enable STUN external IP detection

### üöÄ Previous Major Feature: Multi-Adapter Packet Capture
- **Multi-Adapter Capture**: Simultaneous packet capture from all network adapters
- **Smart Filtering**: Automatic exclusion of virtual adapters
- **Packet Deduplication**: Hash-based duplicate detection with 3ms time window
- **Background Processing**: Optimized performance with separate workers per adapter

### üõ†Ô∏è Critical Bug Fixes
- **Fixed NullReferenceException**: Resolved crashes in SettingsForm initialization
- **UDP ProcessRecord**: Fixed missing RemoteAddress/RemotePort fields handling
- **Project Integration**: Proper inclusion of all new classes in tickMeter.csproj
- **Namespace Consistency**: Unified namespace usage across all components
- **Compilation Issues**: Resolved all build errors and warnings

### ‚ú® User Interface Enhancements
- **Universal Checkboxes**: 10 new configuration options in settings panel
- **Grouped Layout**: Logical organization of universal features at coordinates (24,480)-(300,560)
- **Real-time Feedback**: Immediate application of setting changes
- **Enhanced Ping Display**: Integration of new ping results in main UI

### üìä Latest Statistics
- **New files added**: 3 major new classes (PingManager, TickrateSmoothing, StunClient)
- **Modified files**: 8+ core files for universal features integration
- **New lines added**: 750+ lines of advanced functionality
- **Universal Checkboxes**: 10 new configuration options
- **Functionality**: Backward compatible - all existing features work unchanged

---

## How to Use Universal Features

### Advanced Ping System
1. **Enable TCP Ping**: Check "–ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞—Ç—å TCP ping" in Settings
2. **Interface Binding**: Check "–ü—Ä–∏–≤—è–∑–∞—Ç—å ping –∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É" for accurate measurements
3. **ICMP Fallback**: Check "–§–æ–ª–±—ç–∫ –Ω–∞ ICMP ping" for reliability
4. **Active Targeting**: Check "–ü–∏–Ω–≥–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ —Ü–µ–ª–∏" for efficiency

### EMA Tickrate Smoothing
1. **Enable Smoothing**: Check "–°–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ —Ç–∏–∫—Ä–µ–π—Ç–∞ (EMA)" in Settings
2. **Automatic Application**: Smoothing applied in real-time to tickrate display
3. **Configurable**: Adjust alpha coefficient in settings.ini (tickrate_smoothing_alpha)

### STUN External IP Detection
1. **Enable STUN**: Check "–í–∫–ª—é—á–∏—Ç—å STUN –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤–Ω–µ—à–Ω–µ–≥–æ IP" in Settings
2. **Automatic Detection**: External IP discovered during server detection
3. **Cached Results**: 10-minute cache prevents excessive network requests

### Multi-Adapter Capture (Previous Feature)
1. **Enable Multi-Adapter Mode**: Check "–ó–∞—Ö–≤–∞—Ç—ã–≤–∞—Ç—å —Å–æ –≤—Å–µ—Ö –∞–¥–∞–ø—Ç–µ—Ä–æ–≤" in Settings
2. **Automatic Detection**: Application will detect and use all physical network adapters
3. **Virtual Adapter Filtering**: Loopback, Hyper-V, VMware, and VirtualBox adapters excluded
4. **Performance**: Optimized background processing ensures no performance impact

## Use Cases

### Gaming Scenarios
- **Competitive Gaming**: TCP ping for accurate latency measurements
- **Multiple Connections**: Monitor both Wi-Fi and Ethernet simultaneously  
- **Smooth Metrics**: EMA smoothing prevents distracting tickrate fluctuations
- **External Monitoring**: STUN detection for NAT/firewall troubleshooting

### Development & Testing
- **Network Analysis**: Comprehensive packet monitoring across all adapters
- **Protocol Testing**: TCP and ICMP ping comparison
- **Performance Testing**: Smoothed metrics for stable performance graphs
- **External Connectivity**: STUN for testing external network accessibility

### Network Administration
- **Multi-Interface Monitoring**: Simultaneous capture from all physical adapters
- **Accurate Latency**: Interface-bound ping measurements
- **External IP Tracking**: Automatic external IP detection for NAT scenarios
- **Virtual Environment**: Automatic filtering of virtual network interfaces

## Known Issues
- Line ending warnings during git operations (automatically handled)
- Some virtual adapters may require manual filtering in specific environments

---

*This changelog follows [Keep a Changelog](https://keepachangelog.com/en/1.0.0/) format.*

## [Unreleased] - 2025-09-12

### ÔøΩÔ∏è Critical Bug Fixes
- **Fixed NullReferenceException**: Resolved critical crash in SettingsForm.InitCaptureAllAdaptersState()
- **Improved Initialization**: Moved multi-adapter checkbox initialization to ApplyFromConfig() method
- **Enhanced Safety**: Added null checks for UI components to prevent runtime exceptions
- **Designer Cleanup**: Fixed duplicate field declarations and resource loading issues

### ÔøΩüöÄ Major New Feature: Multi-Adapter Packet Capture
- **Multi-Adapter Capture**: New option to capture packets from all network adapters simultaneously
- **Smart Filtering**: Automatically excludes virtual adapters (loopback, Hyper-V, VMware, VirtualBox)
- **Packet Deduplication**: Intelligent duplicate packet filtering to prevent double counting on network bridges
- **Seamless Integration**: No changes to existing packet processing pipeline or UI - works with all existing features

### üõ†Ô∏è Technical Implementation
- **Background Workers**: Each adapter runs in its own BackgroundWorker for optimal performance
- **Hash-based Deduplication**: Fast 64-byte hash comparison with 3ms time window
- **Automatic Adapter Detection**: Filters out non-physical network interfaces
- **Settings Integration**: New `capture_all_adapters` setting in `settings.ini`

### ‚ú® User Interface Enhancements
- **New Checkbox**: "–ó–∞—Ö–≤–∞—Ç—ã–≤–∞—Ç—å —Å–æ –≤—Å–µ—Ö –∞–¥–∞–ø—Ç–µ—Ä–æ–≤" in Settings form
- **Smart UI**: Automatically disables single adapter selection when multi-mode is enabled
- **Instant Feedback**: Settings saved immediately on change

### üîß Previous Major Improvements
- **TCP Connection Monitoring**: Enhanced TCP connection tracking and management
- **Performance Optimization**: Significantly improved ConnectionsManager performance (474 lines changed)
- **UI/UX Enhancements**: Major improvements to GUI with new features and better user experience

### ‚ú® Previous New Features
- Added new GameServer class for better game server management
- Enhanced ActiveWindowTracker with improved window detection
- Improved RivaTuner integration with extended functionality
- Added comprehensive state management improvements in TickMeterState
- Enhanced packet statistics tracking and display

### üîß Previous Technical Improvements
- **ConnectionsManager.cs**: Major refactoring for better performance and reliability
- **TickMeterState.cs**: Extensive improvements with 646+ lines of enhancements
- **RivaTuner.cs**: Added 137+ lines of new functionality
- **GUI.cs**: Enhanced user interface with 72+ lines of improvements
- **PacketStats.cs**: Improved packet statistics handling

### üêõ Bug Fixes
- Fixed line ending consistency across all source files
- Improved debug logging functionality
- Enhanced error handling in various components
- Fixed project dependencies and references

### üì¶ Dependencies
- Updated project dependencies and package references
- Added new NuGet packages for enhanced functionality:
  - BinarySerializer 8.6.4.1
  - Microsoft.Bcl.AsyncInterfaces 9.0.4
  - Microsoft.Diagnostics.NETCore.Client 0.2.621003
  - Microsoft.Extensions.* suite 9.0.4
  - NUnit 4.3.2
  - Updated PacketDotNet to 1.4.8
  - Added PcapNgNet 0.7.0.0

### üìä Latest Statistics
- **New files added**: 1 workspace file
- **Modified files**: 3 core files (SettingsForm.cs, GUI.cs, CHANGELOG.md)
- **New lines added**: 178+ lines of multi-adapter functionality
- **Functionality**: Backward compatible - all existing features work unchanged

### üîç Component Changes
| Component | Changes | Impact |
|-----------|---------|--------|
| Multi-Adapter Capture | NEW FEATURE | High |
| SettingsForm | UI enhancements | Medium |
| GUI | Multi-capture logic | High |
| ConnectionsManager | Major refactoring | High |
| TickMeterState | Extensive improvements | High |
| RivaTuner | New functionality | Medium |
| Other components | Bug fixes & improvements | Low-Medium |

---

## How to Use Multi-Adapter Capture

1. **Enable Multi-Adapter Mode**: Check "–ó–∞—Ö–≤–∞—Ç—ã–≤–∞—Ç—å —Å–æ –≤—Å–µ—Ö –∞–¥–∞–ø—Ç–µ—Ä–æ–≤" in Settings
2. **Automatic Detection**: Application will automatically detect and use all physical network adapters
3. **Virtual Adapter Filtering**: Loopback, Hyper-V, VMware, and VirtualBox adapters are automatically excluded
4. **Performance**: Optimized background processing ensures no performance impact
5. **Compatibility**: All existing features (Live Packets View, RTSS, profiles) work normally

## Use Cases

- **Gaming**: Monitor both Wi-Fi and Ethernet connections simultaneously
- **Development**: Capture traffic from multiple network interfaces during testing
- **Network Analysis**: Comprehensive packet monitoring across all active adapters
- **VPN Usage**: Monitor both VPN and direct connections (VPN adapters are filtered out automatically)

## Known Issues
- Line ending warnings during git operations (automatically handled)

---

*This changelog follows [Keep a Changelog](https://keepachangelog.com/en/1.0.0/) format.*